services:
  - type: web
    name: mediaflow-ai
    env: node
    buildCommand: |
      npm install && 
      python3 -m pip install --user --upgrade yt-dlp || pip3 install --user --upgrade yt-dlp || python -m pip install --user --upgrade yt-dlp || echo 'yt-dlp install failed' && 
      npm run build
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 3000
      - key: PATH
        value: $HOME/.local/bin:$PATH
    # Add these environment variables in Render dashboard:
    # Required:
    # - DATABASE_URL (PostgreSQL connection string)
    # - UPSTASH_REDIS_REST_URL (Upstash Redis REST URL)
    # - UPSTASH_REDIS_REST_TOKEN (Upstash Redis token)
    # - NEXT_PUBLIC_APP_URL (your Render service URL, set after first deployment)
    # Optional:
    # - YTDLP_COOKIES_FILE (path to cookies.txt for YouTube)
    # - JWT_SECRET (random secret for JWT)
